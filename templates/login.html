{% extends 'base.html' %}

{% block title %}
<title>Login</title> 
{% endblock %}


{% block body %}
<div class="box-head">
    <p class="box-title">
        LOGIN to your account
    </p>
</div>
<hr>
{% endblock %}

{% block content %}

<div class="login-form">
    <form action="{{ url_for('auth.login')}}" method="POST">
        <div class="form-fields">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% set login_error = None %}
                {% for category, msg in messages %}
                    {% if category == 'login_error' %}
                        {% set login_error = msg %}
                    {% endif %}
                {% endfor %}
            {% endwith %}
            <input type="text" class="form-control {% if login_error %}is-invalid{% endif %}" name="username" placeholder="Enter your username">
            {% if login_error %}
                <div class="invalid-feedback">
                    {{ login_error }}
                </div>
            {% endif %}

            <input type="password" class="form-control" name="password" placeholder="Enter your password">
        </div>
        <div class="row" style="margin-top:50px">
            <div class="col-8 offset-2">
                <button class="button-81" style="width: 100%; margin-top: 20px;">Submit</button>
            </div>
        </div>
    </form>

    <hr style="margin-top:70px">
    
    <p style="text-align: center;">
        Don't Have an Account?
    </p>
    <div class="text-center">
        <form action="{{url_for('register')}}">
            <div class="row">
                <div class="col-10 offset-1">
                    <button class="button-81 login-buttons" style="width: 100%;">Register Now</button>
                </div>
            </div>
        </form>
    </div>
</div>

{% endblock %}